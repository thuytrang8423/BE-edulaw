{
  "openapi": "3.0.0",
  "info": {
    "title": "AI Chatbot Law API",
    "version": "1.0.0",
    "description": "API documentation for the AI Chatbot for Education Laws."
  },
  "servers": [
    {
      "url": "https://be-edulaw-production.up.railway.app/api",
      "description": "Railway server"
    }
  ],
  "paths": {
    "/auth/register": {
      "post": {
        "summary": "Register a new user",
        "tags": ["Auth"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": { "type": "string" },
                  "email": { "type": "string", "format": "email" },
                  "password": { "type": "string", "format": "password" }
                },
                "required": ["name", "email", "password"]
              },
              "example": {
                "name": "Nguyen Van A",
                "email": "vana@example.com",
                "password": "Password123"
              }
            }
          }
        },
        "responses": {
          "201": { "description": "User registered successfully. Verification code sent to email." },
          "409": { "description": "User with this email already exists" }
        }
      }
    },
    "/auth/login": {
      "post": {
        "summary": "Login user",
        "tags": ["Auth"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": { "type": "string", "format": "email" },
                  "password": { "type": "string", "format": "password" }
                },
                "required": ["email", "password"]
              },
              "example": {
                "email": "vana@example.com",
                "password": "Password123"
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Login successful. JWT tokens returned." },
          "401": { "description": "Invalid credentials" }
        }
      }
    },
    "/auth/verify-email-code": {
      "post": {
        "summary": "Verify user email with 6-digit code",
        "description": "Nhập mã code 6 số đã gửi về email để xác thực tài khoản. Không dùng link.",
        "tags": ["Auth"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": { "type": "string", "format": "email" },
                  "code": { "type": "string", "example": "123456" }
                },
                "required": ["email", "code"]
              },
              "example": {
                "email": "vana@example.com",
                "code": "123456"
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Email verified successfully" },
          "400": { "description": "Invalid or expired verification code" },
          "404": { "description": "User not found" }
        }
      }
    },
    "/auth/resend-verification": {
      "post": {
        "summary": "Resend verification code (6 digits)",
        "description": "Gửi lại mã xác thực 6 số về email. Không gửi link.",
        "tags": ["Auth"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": { "type": "string", "format": "email" }
                },
                "required": ["email"]
              },
              "example": {
                "email": "vana@example.com"
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Verification code sent successfully" },
          "404": { "description": "User not found" },
          "400": { "description": "Email is already verified" }
        }
      }
    },
    "/auth/forgot-password": {
      "post": {
        "summary": "Request password reset (send 6-digit code)",
        "description": "Gửi mã code 6 số về email để đặt lại mật khẩu. Không gửi link.",
        "tags": ["Auth"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": { "type": "string", "format": "email" }
                },
                "required": ["email"]
              },
              "example": {
                "email": "vana@example.com"
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Password reset code sent if account exists" },
          "500": { "description": "Failed to send password reset code" }
        }
      }
    },
    "/auth/reset-password": {
      "post": {
        "summary": "Reset password with 6-digit code",
        "description": "Đặt lại mật khẩu bằng mã code 6 số đã gửi về email. Không dùng link.",
        "tags": ["Auth"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "email": { "type": "string", "format": "email" },
                  "code": { "type": "string", "example": "123456" },
                  "password": { "type": "string", "format": "password" }
                },
                "required": ["email", "code", "password"]
              },
              "example": {
                "email": "vana@example.com",
                "code": "123456",
                "password": "NewPassword123"
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Password reset successfully" },
          "400": { "description": "Invalid or expired code" },
          "404": { "description": "User not found" }
        }
      }
    },
    "/auth/refresh-token": {
      "post": {
        "summary": "Refresh access token",
        "tags": ["Auth"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "refreshToken": { "type": "string" }
                },
                "required": ["refreshToken"]
              }
            }
          }
        },
        "responses": {
          "200": { "description": "New access and refresh tokens returned" },
          "401": { "description": "Invalid refresh token" }
        }
      }
    },
    "/auth/me": {
      "get": {
        "summary": "Get current user info",
        "tags": ["Auth"],
        "security": [{ "bearerAuth": [] }],
        "responses": {
          "200": { "description": "Current user info returned" },
          "401": { "description": "Unauthorized" }
        }
      }
    },
    "/auth/logout": {
      "post": {
        "summary": "Logout user (client-side token removal)",
        "tags": ["Auth"],
        "security": [{ "bearerAuth": [] }],
        "responses": {
          "200": { "description": "Logout successful" },
          "401": { "description": "Unauthorized" }
        }
      }
    },
    "/auth/google": {
      "post": {
        "summary": "Login with Google OAuth (Expo/React Native/Web)",
        "description": "FE lấy id_token từ Google (qua Expo AuthSession hoặc Google Identity Services), gửi lên backend để xác thực và nhận JWT.",
        "tags": ["Auth"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "id_token": { "type": "string", "description": "Google ID Token" }
                },
                "required": ["id_token"]
              },
              "example": {
                "id_token": "ya29.a0AfH6SMB..."
              }
            }
          }
        },
        "responses": {
          "200": { "description": "Login with Google successful. JWT tokens returned." },
          "401": { "description": "Google login failed" },
          "400": { "description": "Missing Google ID token or Google account has no email" }
        }
      }
    },
    
    "/legal-docs": {
      "get": {
        "summary": "[USER/ADMIN] Get all legal documents",
        "description": "User và admin đều có thể xem danh sách văn bản pháp luật.",
        "tags": ["LegalDocument"],
        "responses": { "200": { "description": "List of legal documents" } }
      },
      "post": {
        "summary": "[ADMIN] Create a new legal document",
        "description": "Chỉ admin mới được tạo mới văn bản pháp luật.",
        "tags": ["LegalDocument"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "document_name": { "type": "string" },
                  "document_type": { "type": "string" },
                  "document_date_issue": { "type": "string", "format": "date" },
                  "document_signee": { "type": "string" }
                },
                "required": ["document_name", "document_type", "document_date_issue"]
              }
            }
          }
        },
        "responses": { "201": { "description": "Legal document created" } }
      }
    },
    "/legal-docs/upload": {
      "post": {
        "summary": "[ADMIN] Upload PDF, extract and save clauses",
        "description": "Chỉ admin mới được sử dụng. Upload file PDF luật, trích xuất và lưu các điều khoản vào database.",
        "tags": ["LegalDocument"],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "document_name": { "type": "string" },
                  "document_type": { "type": "string" },
                  "document_date_issue": { "type": "string", "format": "date" },
                  "document_signee": { "type": "string" },
                  "file": { "type": "string", "format": "binary" }
                },
                "required": ["document_name", "document_type", "document_date_issue", "file"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Upload và trích xuất thành công",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string" },
                    "document": { "type": "object" },
                    "clauses_saved": { "type": "integer" }
                  }
                }
              }
            }
          },
          "500": { "description": "Lỗi xử lý file hoặc trích xuất" }
        }
      }
    },
    "/legal-docs/{id}": {
      "get": {
        "summary": "[USER/ADMIN] Get legal document by ID",
        "description": "User và admin đều có thể xem chi tiết văn bản.",
        "tags": ["LegalDocument"],
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }
        ],
        "responses": { "200": { "description": "Legal document found" }, "404": { "description": "Not found" } }
      },
      "put": {
        "summary": "[ADMIN] Update legal document by ID",
        "description": "Chỉ admin mới được cập nhật văn bản.",
        "tags": ["LegalDocument"],
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "document_name": { "type": "string" },
                  "document_type": { "type": "string" },
                  "document_date_issue": { "type": "string", "format": "date" },
                  "document_signee": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": { "200": { "description": "Legal document updated" }, "404": { "description": "Not found" } }
      },
      "delete": {
        "summary": "[ADMIN] Delete legal document by ID",
        "description": "Chỉ admin mới được xóa văn bản.",
        "tags": ["LegalDocument"],
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }
        ],
        "responses": { "200": { "description": "Legal document deleted" }, "404": { "description": "Not found" } }
      }
    },
    
    "/legal-clauses": {
      "get": {
        "summary": "[USER/ADMIN] Get all legal clauses",
        "description": "User và admin đều có thể xem danh sách điều khoản.",
        "tags": ["LegalClause"],
        "responses": { "200": { "description": "List of legal clauses" } }
      },
      "post": {
        "summary": "[ADMIN] Create a new legal clause",
        "description": "Chỉ admin mới được tạo mới điều khoản.",
        "tags": ["LegalClause"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "clause_number": { "type": "string" },
                  "clause_content": { "type": "string" },
                  "embedding": { "type": "array", "items": { "type": "number" } },
                  "document_id": { "type": "string" }
                },
                "required": ["clause_number", "clause_content", "document_id"]
              }
            }
          }
        },
        "responses": { "201": { "description": "Legal clause created" } }
      }
    },
    "/legal-clauses/search": {
      "get": {
        "summary": "[USER/ADMIN] Search legal clauses by keyword",
        "description": "User và admin đều có thể tìm kiếm điều khoản theo từ khóa.",
        "tags": ["LegalClause"],
        "parameters": [
          {
            "name": "q",
            "in": "query",
            "description": "Từ khóa tìm kiếm trong nội dung hoặc số điều khoản",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Danh sách điều khoản phù hợp",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "_id": { "type": "string" },
                      "clause_number": { "type": "string" },
                      "clause_content": { "type": "string" },
                      "document_id": { "type": "string" }
                    }
                  }
                }
              }
            }
          },
          "400": { "description": "Missing search keyword" }
        }
      }
    },
    "/legal-clauses/{id}": {
      "get": {
        "summary": "[USER/ADMIN] Get legal clause by ID",
        "description": "User và admin đều có thể xem chi tiết điều khoản.",
        "tags": ["LegalClause"],
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }
        ],
        "responses": { "200": { "description": "Legal clause found" }, "404": { "description": "Not found" } }
      },
      "put": {
        "summary": "[ADMIN] Update legal clause by ID",
        "description": "Chỉ admin mới được cập nhật điều khoản.",
        "tags": ["LegalClause"],
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "clause_number": { "type": "string" },
                  "clause_content": { "type": "string" },
                  "embedding": { "type": "array", "items": { "type": "number" } },
                  "document_id": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": { "200": { "description": "Legal clause updated" }, "404": { "description": "Not found" } }
      },
      "delete": {
        "summary": "[ADMIN] Delete legal clause by ID",
        "description": "Chỉ admin mới được xóa điều khoản.",
        "tags": ["LegalClause"],
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }
        ],
        "responses": { "200": { "description": "Legal clause deleted" }, "404": { "description": "Not found" } }
      }
    },
    
    "/answer-clauses": {
      "get": {
        "summary": "Get all answer-clauses",
        "tags": ["AnswerClause"],
        "responses": { "200": { "description": "List of answer-clauses" } }
      },
      "post": {
        "summary": "Create a new answer-clause",
        "tags": ["AnswerClause"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "answer_id": { "type": "string" },
                  "clause_id": { "type": "string" }
                },
                "required": ["answer_id", "clause_id"]
              }
            }
          }
        },
        "responses": { "201": { "description": "Answer-clause created" } }
      }
    },
    "/answer-clauses/{id}": {
      "get": {
        "summary": "Get answer-clause by ID",
        "tags": ["AnswerClause"],
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }
        ],
        "responses": { "200": { "description": "Answer-clause found" }, "404": { "description": "Not found" } }
      },
      "put": {
        "summary": "Update answer-clause by ID",
        "tags": ["AnswerClause"],
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "answer_id": { "type": "string" },
                  "clause_id": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": { "200": { "description": "Answer-clause updated" }, "404": { "description": "Not found" } }
      },
      "delete": {
        "summary": "Delete answer-clause by ID",
        "tags": ["AnswerClause"],
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }
        ],
        "responses": { "200": { "description": "Answer-clause deleted" }, "404": { "description": "Not found" } }
      }
    },
    
    "/answers": {
      "get": {
        "summary": "[USER/ADMIN] Get all answers",
        "description": "User và admin đều có thể xem danh sách câu trả lời.",
        "tags": ["Answer"],
        "responses": { "200": { "description": "List of answers" } }
      },
      "post": {
        "summary": "[ADMIN] Create a new answer",
        "description": "Chỉ admin mới được tạo mới câu trả lời.",
        "tags": ["Answer"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "answer_content": { "type": "string" },
                  "question_id": { "type": "string" }
                },
                "required": ["answer_content", "question_id"]
              }
            }
          }
        },
        "responses": { "201": { "description": "Answer created" } }
      }
    },
    "/answers/{id}": {
      "get": {
        "summary": "[USER/ADMIN] Get answer by ID",
        "description": "User và admin đều có thể xem chi tiết câu trả lời.",
        "tags": ["Answer"],
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }
        ],
        "responses": { "200": { "description": "Answer found" }, "404": { "description": "Not found" } }
      },
      "put": {
        "summary": "[ADMIN] Update answer by ID",
        "description": "Chỉ admin mới được cập nhật câu trả lời.",
        "tags": ["Answer"],
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "answer_content": { "type": "string" },
                  "question_id": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": { "200": { "description": "Answer updated" }, "404": { "description": "Not found" } }
      },
      "delete": {
        "summary": "[ADMIN] Delete answer by ID",
        "description": "Chỉ admin mới được xóa câu trả lời.",
        "tags": ["Answer"],
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }
        ],
        "responses": { "200": { "description": "Answer deleted" }, "404": { "description": "Not found" } }
      }
    },
    
    "/notifications": {
      "get": {
        "summary": "[USER/ADMIN] Get all notifications",
        "description": "User và admin đều có thể xem danh sách thông báo.",
        "tags": ["Notification"],
        "responses": { "200": { "description": "List of notifications" } }
      },
      "post": {
        "summary": "[ADMIN] Create a new notification",
        "description": "Chỉ admin mới được tạo mới thông báo.",
        "tags": ["Notification"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "title": { "type": "string" },
                  "content": { "type": "string" },
                  "isRead": { "type": "boolean" }
                },
                "required": ["title", "content"]
              }
            }
          }
        },
        "responses": { "201": { "description": "Notification created" } }
      }
    },
    "/notifications/{id}": {
      "get": {
        "summary": "[USER/ADMIN] Get notification by ID",
        "description": "User và admin đều có thể xem chi tiết thông báo.",
        "tags": ["Notification"],
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }
        ],
        "responses": { "200": { "description": "Notification found" }, "404": { "description": "Not found" } }
      },
      "put": {
        "summary": "[ADMIN] Update notification by ID",
        "description": "Chỉ admin mới được cập nhật thông báo.",
        "tags": ["Notification"],
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "title": { "type": "string" },
                  "content": { "type": "string" },
                  "isRead": { "type": "boolean" }
                }
              }
            }
          }
        },
        "responses": { "200": { "description": "Notification updated" }, "404": { "description": "Not found" } }
      },
      "delete": {
        "summary": "[ADMIN] Delete notification by ID",
        "description": "Chỉ admin mới được xóa thông báo.",
        "tags": ["Notification"],
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }
        ],
        "responses": { "200": { "description": "Notification deleted" }, "404": { "description": "Not found" } }
      }
    },
    
    "/questions": {
      "get": {
        "summary": "[USER/ADMIN] Get all questions",
        "description": "User và admin đều có thể xem danh sách câu hỏi.",
        "tags": ["Question"],
        "responses": { "200": { "description": "List of questions" } }
      },
      "post": {
        "summary": "[USER/ADMIN] Create a new question",
        "description": "User và admin đều có thể tạo mới câu hỏi.",
        "tags": ["Question"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "question_content": { "type": "string" },
                  "account_id": { "type": "string" }
                },
                "required": ["question_content", "account_id"]
              }
            }
          }
        },
        "responses": { "201": { "description": "Question created" } }
      }
    },
    "/questions/{id}": {
      "get": {
        "summary": "[USER/ADMIN] Get question by ID",
        "description": "User và admin đều có thể xem chi tiết câu hỏi.",
        "tags": ["Question"],
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }
        ],
        "responses": { "200": { "description": "Question found" }, "404": { "description": "Not found" } }
      },
      "put": {
        "summary": "[USER/ADMIN] Update question by ID",
        "description": "User và admin đều có thể cập nhật câu hỏi của mình.",
        "tags": ["Question"],
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "question_content": { "type": "string" },
                  "account_id": { "type": "string" }
                }
              }
            }
          }
        },
        "responses": { "200": { "description": "Question updated" }, "404": { "description": "Not found" } }
      },
      "delete": {
        "summary": "[USER/ADMIN] Delete question by ID",
        "description": "User và admin đều có thể xóa câu hỏi của mình.",
        "tags": ["Question"],
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }
        ],
        "responses": { "200": { "description": "Question deleted" }, "404": { "description": "Not found" } }
      }
    },
    "/questions/chat-history": {
      "get": {
        "summary": "[USER/ADMIN] Lấy lịch sử chat theo user và session (chat_id)",
        "description": "Trả về danh sách các cặp question-answer của user, có thể filter theo chat_id (mỗi session là một cuộc hội thoại riêng).",
        "tags": ["Question"],
        "parameters": [
          {
            "name": "user_id",
            "in": "query",
            "description": "ID của user (bắt buộc)",
            "required": true,
            "schema": { "type": "string" }
          },
          {
            "name": "chat_id",
            "in": "query",
            "description": "ID của cuộc hội thoại (session). Nếu không truyền sẽ trả về toàn bộ lịch sử của user.",
            "required": false,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Danh sách lịch sử chat (question-answer)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "question": { "type": "string" },
                      "answer": { "type": "string" },
                      "question_date": { "type": "string", "format": "date-time" },
                      "answer_date": { "type": "string", "format": "date-time" },
                      "chat_id": { "type": "string" }
                    }
                  }
                }
              }
            }
          },
          "400": { "description": "Missing user_id" }
        }
      }
    },
    "/questions/chat-sessions": {
      "get": {
        "summary": "[USER/ADMIN] Lấy danh sách các phòng chat (session) của user",
        "description": "Trả về danh sách các phòng chat (session) của user, mỗi session là một cuộc hội thoại riêng biệt. Dùng để hiển thị sidebar lịch sử chat như ChatGPT.",
        "tags": ["Question"],
        "parameters": [
          {
            "name": "user_id",
            "in": "query",
            "description": "ID của user (bắt buộc)",
            "required": true,
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "Danh sách các phòng chat (session)",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "chat_id": { "type": "string" },
                      "last_question_date": { "type": "string", "format": "date-time" },
                      "first_question": { "type": "string" }
                    }
                  }
                }
              }
            }
          },
          "400": { "description": "Missing user_id" }
        }
      }
    },
    
    "/feedbacks": {
      "post": {
        "summary": "[USER] Gửi feedback về hệ thống",
        "description": "User gửi góp ý/phản hồi về hệ thống.",
        "tags": ["Feedback"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "user_id": { "type": "string" },
                  "content": { "type": "string" }
                },
                "required": ["user_id", "content"]
              }
            }
          }
        },
        "responses": { "201": { "description": "Feedback created" } }
      },
      "get": {
        "summary": "[ADMIN] Xem tất cả feedback",
        "description": "Admin xem danh sách góp ý/phản hồi của user.",
        "tags": ["Feedback"],
        "responses": { "200": { "description": "List of feedbacks" } }
      }
    },
    "/feedbacks/{id}": {
      "put": {
        "summary": "[ADMIN] Xử lý feedback",
        "description": "Admin cập nhật trạng thái hoặc nội dung feedback.",
        "tags": ["Feedback"],
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "content": { "type": "string" },
                  "status": { "type": "string", "enum": ["pending", "handled"] }
                }
              }
            }
          }
        },
        "responses": { "200": { "description": "Feedback updated" }, "404": { "description": "Not found" } }
      },
      "delete": {
        "summary": "[ADMIN] Xóa feedback",
        "description": "Admin xóa góp ý/phản hồi.",
        "tags": ["Feedback"],
        "parameters": [
          { "name": "id", "in": "path", "required": true, "schema": { "type": "string" } }
        ],
        "responses": { "200": { "description": "Feedback deleted" }, "404": { "description": "Not found" } }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    }
  }
} 
